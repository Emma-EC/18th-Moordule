{% extends "base/layout.html" %}

{% block content %}
<div class="bg-white text-gray-900 pt-24 mt-20">
    <!-- 聚會資訊區 -->
    <div  class="bg-yellow-300 rounded-3xl h-auto max-w-full overflow-hidden shadow-lg mx-auto p-4 ">
        <div class="px-4 py-10 flex flex-col md:flex-row gap-4 rounded-3xl h-full">
            <!-- 圖片區域保持固定比例 -->
            <div class="relative w-full md:basis-1/3 aspect-w-16 aspect-h-9 rounded-s-3xl bg-white overflow-hidden">
                <img src="{{ activity.photo.url }}" alt="{{ activity.title }}" class="absolute inset-0 w-full h-full object-cover">
            </div>

            <div class="w-full md:basis-2/3 rounded-r-3xl bg-white">
                <!-- 參與者名單區 -->
                <div class="mt-10">
                    <h2 class="text-3xl font-bold text-center mb-4">活動：{{ activity.title }} - 參與者名單</h2>
                    <span class="text-lg">已參加{{ activity.participants.count }} / {{ activity.max_participants }}人</span>
                    
                    <div class="overflow-x-auto shadow-md rounded-lg p-4 mt-4">
                        <table class="table-auto w-full border-separate border-spacing-0.5 text-sm">
                            <thead>
                                <tr class=" bg-moordule-deep-blue ">
                                    <th class="px-4 py-2 text-left">用戶名稱</th>
                                    <th class="px-4 py-2 text-left">年齡</th>
                                    <th class="px-4 py-2 text-left">性別</th>
                                    <th class="px-4 py-2 text-left">居住地</th>
                                    <th class="px-4 py-2 text-left">自我介紹</th>
                                    <th class="px-4 py-2 text-left">頭像</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for participant in participants_info %}
                                    <tr class="border-b">
                                        <td class="px-4 py-2">{{ participant.username }}</td>
                                        <td class="px-4 py-2">{{ participant.age }}</td>
                                        <td class="px-4 py-2">{{ participant.gender }}</td>
                                        <td class="px-4 py-2">{{ participant.live_in }}</td>
                                        <td class="px-4 py-2">{{ participant.bio }}</td>
                                        <td class="px-4 py-2 text-center">
                                            {% if participant.avatar %}
                                                <img src="{{ participant.avatar }}" alt="Avatar" class="w-12 h-12 rounded-full object-cover">
                                            {% else %}
                                                <span class="text-gray-400">無頭像</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4">
                        <span class="text-lg">聚會日期：{{ activity.start_time|date:"Y-m-d" }}</span>
                        <span class="text-lg ml-4">聚會時間：{{ activity.start_time|date:"H:i" }}</span>
                        <p class="text-xs">聯繫客服：moordule＠gmail.com</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
